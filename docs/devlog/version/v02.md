# Robocute v0.2 ç¬¬ä¸€è½®é‡æ„

**å¼€å‘å‘¨æœŸ**: 2025å¹´12æœˆ1æ—¥ - 2024å¹´12æœˆ30æ—¥  
**çŠ¶æ€**: âœ… å·²å®Œæˆ

## æ¦‚è¿°

V0.2æ˜¯åœ¨å®Œæˆv0.1 MVPç‰ˆæœ¬ä¹‹åçš„ç¬¬ä¸€è½®é‡æ„ç‰ˆæœ¬ï¼Œä¸»è¦ç›®æ ‡æ˜¯å®Œå–„åº•å±‚åŸºç¡€è®¾æ–½ï¼Œæå‡ç³»ç»Ÿçš„å¥å£®æ€§å’Œå¯æ‰©å±•æ€§ï¼Œä¸ºåç»­çš„åŠŸèƒ½å¼€å‘æ‰“ä¸‹åšå®åŸºç¡€ã€‚

## è®¡åˆ’ç›®æ ‡

### CodebaseåŸºç¡€è®¾æ–½
- ğŸ¯ python codegen æµç¨‹é‡æ„
- ğŸ¯ serdeåºåˆ—åŒ–æµç¨‹é‡æ„

### åœºæ™¯ä¸èµ„æºç³»ç»Ÿ
- ğŸ¯ C++é€šç”¨åœºæ™¯å’Œèµ„æºç®¡ç†ç³»ç»Ÿ
- ğŸ¯ GLTFèµ„æºå¯¼å…¥æ”¯æŒ

### åŠ¨ç”»ç³»ç»Ÿ
- ğŸ¯ åŸºäºozzå¼€å‘AnimGraphåŠ¨ç”»å›¾æ”¯æŒ
- ğŸ¯ éª¨éª¼åŠ¨ç”»å’Œè’™çš®ç½‘æ ¼æ”¯æŒ

### Editoræ›´æ–°
- ğŸ¯ çº¯èŠ‚ç‚¹ç•Œé¢å’ŒViewportç•Œé¢å·¥ä½œæµåˆ‡æ¢
- ğŸ¯ åŸºç¡€å…‰æ …æ¸²æŸ“å™¨ï¼šç½‘æ ¼çº¿ï¼Œç‚¹é€‰æè¾¹ï¼Œç›¸æœº
- ğŸ¯ MainWindowæ¶æ„é‡æ„

### æ¸²æŸ“ç³»ç»Ÿ
- ğŸ¯ æ›´æ–°æ¥å…¥åœºæ™¯å’ŒåŠ¨ç”»çš„æ¥å£
- ğŸ¯ ä¿®å¤bugï¼Œå¢åŠ å…‰æ …æ•ˆæœ

## å®ç°æƒ…å†µ

### âœ… CodebaseåŸºç¡€è®¾æ–½ (100%)

#### Python Codegené‡æ„
- âœ… é‡æ„äº†C++åˆ°Pythonçš„ç»‘å®šä»£ç ç”Ÿæˆæµç¨‹
- âœ… å®ç°äº†åŸºäº`ModuleRegister`çš„è‡ªåŠ¨æ³¨å†Œæœºåˆ¶
- âœ… æ”¯æŒå‘é‡ã€çŸ©é˜µã€GUIDç­‰åŸºç¡€ç±»å‹çš„è‡ªåŠ¨å¯¼å‡º
- âœ… æ”¹è¿›äº†ç±»å‹æ˜ å°„å’Œå†…å­˜ç®¡ç†

#### Serdeåºåˆ—åŒ–ç³»ç»Ÿé‡æ„
- âœ… å®ç°äº†ç»Ÿä¸€çš„äºŒè¿›åˆ¶åºåˆ—åŒ–æ¡†æ¶ (`ArchiveWrite`, `ArchiveRead`)
- âœ… æ”¯æŒé“¾å¼åºåˆ—åŒ– (linked node serde)
- âœ… å®ç°äº†ozzåŠ¨ç”»èµ„äº§çš„åºåˆ—åŒ–æ”¯æŒ (`OzzStream`)
- âœ… JSONåºåˆ—åŒ–å™¨ (`JsonSerializer`)
- âœ… èµ„æºå†…å®¹åºåˆ—åŒ–æ¥å£ (`write_content_to`, `read_content_from`)

#### æ’ä»¶åŠ è½½é‡æ„

å®ç°äº†åŸºäºpluginçš„æ’ä»¶åŠ è½½é‡æ„ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½dllï¼Œæ–¹ä¾¿æœªæ¥çš„æ‹“å±•å¼€å‘ã€‚





### âœ… åœºæ™¯ä¸èµ„æºç³»ç»Ÿ (100%)

#### é€šç”¨èµ„æºç®¡ç†æ¡†æ¶
- âœ… `ResourceBase` åŸºç±»å’Œèµ„æºç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… èµ„æºåŠ è½½çŠ¶æ€æœº (`EResourceLoadingStatus`)
- âœ… å¼‚æ­¥èµ„æºåŠ è½½æ”¯æŒ
- âœ… èµ„æºä¾èµ–ç®¡ç†
- âœ… GUIDèµ„æºæ ‡è¯†ç³»ç»Ÿ

#### GLTFå¯¼å…¥å™¨å®ç°
- âœ… **ç½‘æ ¼å¯¼å…¥** (`GltfMeshImporter`, `GlbMeshImporter`)
  - æ”¯æŒä½ç½®ã€æ³•çº¿ã€UVã€åˆ‡çº¿å¯¼å…¥
  - æ”¯æŒå¤šä¸ªUVé›†
  - æ”¯æŒè’™çš®æƒé‡å’Œéª¨éª¼ç´¢å¼•
- âœ… **éª¨éª¼å¯¼å…¥** (`GltfSkeletonImporter`)
  - GLTFåˆ°ozz skeletonçš„è½¬æ¢
  - Raw skeletonåˆ°Runtime skeletonçš„çƒ˜ç„™
- âœ… **è’™çš®å¯¼å…¥** (`GltfSkinImporter`)
  - è’™çš®ç»‘å®šä¿¡æ¯å¯¼å…¥
  - é€†ç»‘å®šçŸ©é˜µå¤„ç†
- âœ… **åŠ¨ç”»å¯¼å…¥** (`GltfAnimSequenceImporter`)
  - åŠ¨ç”»è½¨é“å¯¼å…¥
  - é‡‡æ ·ç‡é…ç½®
  - å¤šåŠ¨ç”»æ”¯æŒ

**å…³é”®æ–‡ä»¶**:
- `rbc/runtime/src/world/importers/mesh_importer_gltf.cpp`
- `rbc/runtime/src/world/importers/skel_importer_gltf.cpp`
- `rbc/runtime/src/world/importers/skin_importer_gltf.cpp`
- `rbc/runtime/src/world/importers/anim_sequence_importer_gltf.cpp`
- `rbc/runtime/src/world/importers/gltf2ozz.cpp`

**å…³é”®æäº¤**:
- `14824b3` - gltf importer
- `68ed6bc` - gltf -> skeleton/skin/anim
- `fc0e577` - skin & anim import done

#### åœºæ™¯ç®¡ç†å™¨
- âœ… `SceneManager` - ç»Ÿä¸€çš„åœºæ™¯èµ„æºç®¡ç†
- âœ… `BufferAllocator` - GPUç¼“å†²åŒºåˆ†é…å™¨
- âœ… `BindlessManager` - Bindlessèµ„æºç®¡ç†
- âœ… `MeshManager` - ç½‘æ ¼èµ„æºç®¡ç†
- âœ… `AccelManager` - åŠ é€Ÿç»“æ„ç®¡ç†

### âœ… åŠ¨ç”»ç³»ç»Ÿ (100%)

#### OzzåŠ¨ç”»é›†æˆ
- âœ… **éª¨éª¼ç³»ç»Ÿ** (`ReferenceSkeleton`, `SkeletonResource`)
  - ozz skeleton runtimeé›†æˆ
  - éª¨éª¼å±‚çº§ç®¡ç†
  - åºåˆ—åŒ–æ”¯æŒ
- âœ… **åŠ¨ç”»åºåˆ—** (`AnimSequenceResource`)
  - ozz animation runtimeé›†æˆ
  - åŠ¨ç”»é‡‡æ ·æ”¯æŒ
  - åºåˆ—åŒ–æ”¯æŒ
- âœ… **è’™çš®ç³»ç»Ÿ** (`SkinResource`)
  - è’™çš®ç»‘å®šä¿¡æ¯
  - é€†ç»‘å®šçŸ©é˜µ
  - éª¨éª¼ç´¢å¼•æ˜ å°„

**å…³é”®ç±»å‹**:
```cpp
using AnimSequenceRuntimeAsset = ozz::animation::Animation;
using SkeletonRuntimeAsset = ozz::animation::Skeleton;
using AnimSkinningJob = ozz::geometry::SkinningJob;
using AnimLocalToModelJob = ozz::animation::LocalToModelJob;
using AnimSamplingJob = ozz::animation::SamplingJob;
```

**å…³é”®æäº¤**:
- `378a654` - reference skeleton basic
- `7a628af` - ozz resource import done
- `b54f52c` - anim prototype
- `55788c5` - anim sampling update

#### è’™çš®ç½‘æ ¼æ¸²æŸ“
- âœ… Dual Quaternion Skinning (DQS) å®ç°
- âœ… è’™çš®ç½‘æ ¼åºåˆ—åŒ–
- âœ… GPUè’™çš®è®¡ç®—
- âœ… èŠ‚ç‚¹è®¾å¤‡äº’æ“ä½œä¼˜åŒ–

**å…³é”®æäº¤**:
- `06333cf` - Dual quaternion skinning
- `69bc649` - skinning api
- `9c8c7a3` - skinning mesh serde
- `24c5b47` - Node device interop, add mutable-buffer to optimize skinning memory
- `a0327c5` - split SkinAttrib into Index and Weight

### âœ… Editoræ›´æ–° (95%)

#### æ¶æ„é‡æ„ (EditorV02)
- âœ… **EditorContext** - é›†ä¸­çš„ç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†
- âœ… **EditorLayoutManager** - UIå¸ƒå±€ç®¡ç†å™¨
  - èœå•æ å’Œå·¥å…·æ ç®¡ç†
  - Dockçª—å£ç®¡ç†
  - å·¥ä½œæµå¸ƒå±€åˆ‡æ¢
- âœ… **WorkflowManager** - å·¥ä½œæµæ§åˆ¶å™¨
  - SceneEditingå·¥ä½œæµ
  - Text2Imageå·¥ä½œæµ
  - å·¥ä½œæµåˆ‡æ¢é€»è¾‘
- âœ… **SceneSyncManager** - åœºæ™¯åŒæ­¥ç®¡ç†å™¨
- âœ… **AnimationPlaybackManager** - åŠ¨ç”»æ’­æ”¾ç®¡ç†å™¨

**å…³é”®æ–‡ä»¶**:
- `rbc/editor/runtime/include/RBCEditorRuntime/runtime/EditorContext.h`
- `rbc/editor/runtime/src/runtime/EditorLayoutManager.cpp`
- `rbc/editor/runtime/src/runtime/WorkflowManager.cpp`

**å…³é”®æäº¤**:
- `616812f` - refactor editor
- `0d195fa` - split editor runtime and app
- `ef20295` - fix editor dpi error
- `c05c147` - editor run pass

#### Viewportå’Œæ¸²æŸ“
- âœ… **ViewportWidget** - 3Dè§†å£ç»„ä»¶
  - RhiWindowé›†æˆ
  - é¼ æ ‡å’Œé”®ç›˜äº‹ä»¶å¤„ç†
  - å®ä½“æ‹–æ”¾æ”¯æŒ
- âœ… **ViewportInteractionManager** - è§†å£äº¤äº’ç®¡ç†
  - é€‰æ‹©æ¨¡å¼
  - æ¡†é€‰æ¨¡å¼
  - æ‹–åŠ¨æ¨¡å¼
- âœ… **CameraController** - ç›¸æœºæ§åˆ¶å™¨
  - WASDç§»åŠ¨
  - é¼ æ ‡æ—‹è½¬
  - ç¼©æ”¾æ”¯æŒ

**å…³é”®æ–‡ä»¶**:
- `rbc/editor/runtime/src/components/ViewportWidget.cpp`
- `rbc/editor/runtime/src/engine/visapp.cpp`
- `rbc/app/src/camera_controller.cpp`

#### NodeEditorå¢å¼º
- âœ… èŠ‚ç‚¹åˆ·æ–°åŠŸèƒ½
- âœ… æ‰§è¡Œé¢æ¿
- âœ… è¿æ¥çŠ¶æ€è§†å›¾
- âœ… èŠ‚ç‚¹å·¥å‚ç³»ç»Ÿ

**å…³é”®æäº¤**:
- `7fa7e7b` - start node
- `5b7fa7f` - linked node serde

### âœ… æ¸²æŸ“ç³»ç»Ÿ (100%)

#### å…‰æ …æ¸²æŸ“ç®¡çº¿
- âœ… **RasterPass** - åŸºç¡€å…‰æ …æ¸²æŸ“é€šé“
  - æ·±åº¦ç¼“å†²
  - ID mapæ¸²æŸ“
  - è§†é”¥ä½“å‰”é™¤
  - åŸºç¡€ç€è‰²
- âœ… **EditingPass** - ç¼–è¾‘æ¨¡å¼æ¸²æŸ“
  - è½®å»“æè¾¹
  - é€‰æ‹©é«˜äº®
  - æ¡†é€‰çŸ©å½¢
- âœ… **PreparePass** - å‡†å¤‡é€šé“
  - ç›¸æœºæ•°æ®æ›´æ–°
  - å˜æ¢çŸ©é˜µè®¡ç®—
- âœ… **PostPass** - åå¤„ç†é€šé“
  - è‰²è°ƒæ˜ å°„
  - Gammaæ ¡æ­£

**å…³é”®æ–‡ä»¶**:
- `rbc/render_plugin/src/raster_pass.cpp`
- `rbc/render_plugin/src/editing_pass.cpp`
- `rbc/render_plugin/src/prepare_pass.cpp`
- `rbc/render_plugin/src/post_pass.cpp`

**å…³é”®æäº¤**:
- `f327b2d` - raster shading

#### æ¸²æŸ“å™¨æ•°æ®ç»“æ„
- âœ… `CameraData` - ç›¸æœºçŸ©é˜µå’Œå˜æ¢
- âœ… `FrameSettings` - å¸§è®¾ç½®
- âœ… `PTPipelineSettings` - ç®¡çº¿é…ç½®
- âœ… `ClickManager` - ç‚¹å‡»é€‰æ‹©ç®¡ç†

### âœ… PythonèŠ‚ç‚¹æ‰©å±• (80%)

#### åŸºç¡€èŠ‚ç‚¹
- âœ… `EntityInputNode` - å®ä½“è¾“å…¥
- âœ… `EntityGroupInputNode` - å®ä½“ç»„è¾“å…¥
- âœ… `RotationAnimationNode` - æ—‹è½¬åŠ¨ç”»
- âœ… `GroupRotationAnimationNode` - ç»„æ—‹è½¬åŠ¨ç”»
- âœ… `AnimationOutputNode` - åŠ¨ç”»è¾“å‡º

#### ç‰©ç†èŠ‚ç‚¹ (åŸå‹)
- âš ï¸ `UIPCSimNode` - UIPCç‰©ç†æ¨¡æ‹ŸèŠ‚ç‚¹ (æ¥å£å®Œæˆï¼Œå®ç°å¾…è¡¥å……)

#### AIèŠ‚ç‚¹ (åŸå‹)
- âš ï¸ `Text2ImageNode` - æ–‡æœ¬ç”Ÿæˆå›¾åƒ (æ¥å£å®Œæˆï¼Œéœ€è¦diffusersåº“)
- âš ï¸ `CLIPTextEncodeNode` - CLIPæ–‡æœ¬ç¼–ç 
- âš ï¸ `KSamplerNode` - Ké‡‡æ ·å™¨
- âš ï¸ `VAEDecodeNode` - VAEè§£ç å™¨

**å…³é”®æ–‡ä»¶**:
- `custom_nodes/basic.py`
- `custom_nodes/animation_nodes.py`
- `custom_nodes/uipc.py`
- `custom_nodes/text2image_nodes.py` (æ³¨é‡Šæ‰ï¼Œå¾…å®Œå–„)

## æŠ€æœ¯äº®ç‚¹

### 1. å®Œæ•´çš„GLTFèµ„äº§ç®¡çº¿
ä»GLTFæ–‡ä»¶åˆ°è¿è¡Œæ—¶èµ„æºçš„å®Œæ•´æµç¨‹ï¼š
```
GLTF File â†’ Importer â†’ Raw Asset â†’ Builder â†’ Runtime Asset â†’ Serialization
```

### 2. OzzåŠ¨ç”»ç³»ç»Ÿé›†æˆ
- é«˜æ€§èƒ½çš„éª¨éª¼åŠ¨ç”»
- æ”¯æŒè’™çš®ç½‘æ ¼
- å®Œæ•´çš„åºåˆ—åŒ–æ”¯æŒ
- GPUåŠ é€Ÿçš„è’™çš®è®¡ç®—

### 3. æ¨¡å—åŒ–çš„Editoræ¶æ„
- æ¸…æ™°çš„èŒè´£åˆ’åˆ†
- æ˜“äºæ‰©å±•çš„å·¥ä½œæµç³»ç»Ÿ
- è§£è€¦çš„UIç»„ä»¶

### 4. ç»Ÿä¸€çš„åºåˆ—åŒ–æ¡†æ¶
- äºŒè¿›åˆ¶å’ŒJSONåŒæ ¼å¼æ”¯æŒ
- é“¾å¼åºåˆ—åŒ–
- èµ„æºä¾èµ–ç®¡ç†

## æ€§èƒ½ä¼˜åŒ–

- âœ… Unity BuildåŠ é€Ÿç¼–è¯‘ (batchsize=8)
- âœ… Mutable Bufferä¼˜åŒ–è’™çš®å†…å­˜
- âœ… è§†é”¥ä½“å‰”é™¤å‡å°‘æ¸²æŸ“å¼€é”€
- âœ… Bindlessèµ„æºç®¡ç†å‡å°‘çŠ¶æ€åˆ‡æ¢
- âœ… å¼‚æ­¥èµ„æºåŠ è½½

## é—ç•™é—®é¢˜

### å¾…å®Œå–„åŠŸèƒ½
- âš ï¸ AnimGraphåŠ¨ç”»å›¾ç³»ç»Ÿ ï¼ˆå®ç°äº†åŸºç¡€çš„AnimNodeå’ŒSequencePlayerï¼‰
- âš ï¸ UIPCç‰©ç†æ¨¡æ‹ŸèŠ‚ç‚¹å®ç°
- âš ï¸ Text2ImageèŠ‚ç‚¹å®Œæ•´å®ç°
- âš ï¸ åœºæ™¯ä¿å­˜/åŠ è½½UI

### å·²çŸ¥Bug

- âš ï¸ æŸäº›æƒ…å†µä¸‹çš„å†…å­˜æ³„æ¼ (å·²è°ƒè¯•éƒ¨åˆ†)
- âš ï¸ DPIç¼©æ”¾é—®é¢˜ (å·²ä¿®å¤å¤§éƒ¨åˆ†)

## åç»­è®¡åˆ’

V0.2çš„å®Œæˆä¸ºV0.3æ‰“ä¸‹äº†åšå®åŸºç¡€ï¼Œåç»­å°†è½¬å‘ï¼š
1. æ¡ˆä¾‹é©±åŠ¨çš„åŠŸèƒ½å¼€å‘
2. ç‰©ç†æ¨¡æ‹Ÿçš„å®Œæ•´å®ç°
3. AIèŠ‚ç‚¹çš„å®é™…åº”ç”¨
4. æ›´å¤šçš„ç¤ºä¾‹å’Œæ–‡æ¡£

**å®Œæˆæ—¥æœŸ**: 2025å¹´12æœˆ30æ—¥

---

*è¯¦ç»†çš„Editoré‡æ„æ–‡æ¡£è¯·å‚è€ƒ: [Editor V0.2](../editor/EditorV02.md)*

