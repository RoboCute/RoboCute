
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Python-first 3D AIGC/Robotics development tool">
      
      
        <meta name="author" content="RoboCute Team">
      
      
        <link rel="canonical" href="https://robocute.github.io/robocute/design/RBCCore/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>RBCCore - RoboCute Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#rbccore" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="RoboCute Documentation" class="md-header__button md-logo" aria-label="RoboCute Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            RoboCute Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              RBCCore
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/robocute/robocute" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    robocute
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/overview/" class="md-tabs__link">
          
  
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../UserGuide/" class="md-tabs__link">
          
  
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../DeveloperGuide/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/python-api/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="RoboCute Documentation" class="md-nav__button md-logo" aria-label="RoboCute Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5"/></svg>

    </a>
    RoboCute Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/robocute/robocute" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    robocute
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Getting Started
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Installation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    User Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../UserGuide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/scene-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scene Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/node-system/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Node System
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/animation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Animation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user-guide/editor/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Editor
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Development
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Development
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../DeveloperGuide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Developer Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../devlog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Development Log
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BUILD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Building
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/python-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Python API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/rest-api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    REST API
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#rtti" class="md-nav__link">
    <span class="md-ellipsis">
      
        RTTI
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#runtimestatic" class="md-nav__link">
    <span class="md-ellipsis">
      
        RuntimeStatic
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rttr" class="md-nav__link">
    <span class="md-ellipsis">
      
        RTTR
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RTTR">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rttrtype" class="md-nav__link">
    <span class="md-ellipsis">
      
        RTTRType
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rttrrecorddata" class="md-nav__link">
    <span class="md-ellipsis">
      
        RTTRRecordData
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rttrrecordbuilder" class="md-nav__link">
    <span class="md-ellipsis">
      
        RTTRRecordBuilder
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#irttrbasic" class="md-nav__link">
    <span class="md-ellipsis">
      
        IRTTRBasic
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#is_based_on" class="md-nav__link">
    <span class="md-ellipsis">
      
        is_based_on
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rc" class="md-nav__link">
    <span class="md-ellipsis">
      
        RC
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      
        Memory Management
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Memory Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        内存分配函数
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addresssanitizer-asan" class="md-nav__link">
    <span class="md-ellipsis">
      
        使用 AddressSanitizer (ASAN) 测试内存泄漏
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="使用 AddressSanitizer (ASAN) 测试内存泄漏">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#asan" class="md-nav__link">
    <span class="md-ellipsis">
      
        配置 ASAN
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asan_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        在代码中启用 ASAN
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        测试内存泄漏示例
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#asan_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        ASAN 输出解读
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        环境变量配置
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        注意事项
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        最佳实践
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concurrentqueue" class="md-nav__link">
    <span class="md-ellipsis">
      
        ConcurrentQueue
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ConcurrentQueue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      
        特性
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      
        基本使用
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-token-consumer-token" class="md-nav__link">
    <span class="md-ellipsis">
      
        Producer Token 和 Consumer Token
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      
        批量操作
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      
        多线程示例
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    <span class="md-ellipsis">
      
        API 参考
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="API 参考">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      
        构造和析构
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      
        入队操作
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      
        出队操作
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      
        其他操作
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#traits" class="md-nav__link">
    <span class="md-ellipsis">
      
        Traits 配置
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_14" class="md-nav__link">
    <span class="md-ellipsis">
      
        性能建议
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      
        内存管理
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="rbccore">RBCCore<a class="headerlink" href="#rbccore" title="Permanent link">&para;</a></h1>
<p>一些底层功能</p>
<ul>
<li>utils</li>
<li>binary_search</li>
<li>curve</li>
<li>float-Pack</li>
<li>mathematics_double</li>
<li>atomic</li>
<li>binary_file_writer</li>
<li>containers</li>
<li>concurrent_queue - 多生产者多消费者无锁队列</li>
<li>func_serializer</li>
<li>hash</li>
<li>heap_object</li>
<li>json_serde</li>
<li>quaternion</li>
<li>rc</li>
<li>serde</li>
<li>shared_atomic_mutex</li>
<li>state_map</li>
<li>transform</li>
<li>type_info</li>
<li>md5 - string</li>
</ul>
<h2 id="rtti">RTTI<a class="headerlink" href="#rtti" title="Permanent link">&para;</a></h2>
<p>Runtime Type Identification 运行时类型识别，C++中自带的一个简单宏，可以在运行时获取类型名称和信息。RTTI整体是静态注册的，当代码生成偏特化模板之后，不需要运行时做任何额外工作，类型就已经嵌入在代码中了。</p>
<p><code>RTTI(ClassName)</code></p>
<p>宏会注册以下方法
- <code>struct is_rtti_type&lt;ClassName&gt;</code>
  - <code>value</code>: true
  - <code>name</code>: ClassName</p>
<p>IRTTRBasic
- new
- StaticType
- rttr_get_type
- rttr_get_typeid
- rttr_serde_read
- rttr_serde_write
- rttr_cast
  - get_from_type
  - reinterpret_cast
  - <code>const_cast&lt;IRTTRBasic*&gt;(this)-&gt;rttr_cast&lt;TO&gt;()</code>
- rttr_is</p>
<h2 id="runtimestatic">RuntimeStatic<a class="headerlink" href="#runtimestatic" title="Permanent link">&para;</a></h2>
<p>RuntimeStatic的作用是用一个统一的入口<code>RuntimeStaticBase::init_all()</code>和出口<code>RuntimeStaticBase::dispose_all()</code>来初始化和释放无法显示声明的初始化和析构。比如RTTR中，对于RTTR类型的注册过程是由代码生成实现的，正式代码中无法统计到底有多少RTTR类型需要析构，这时候就需要RuntimeStatic来帮助自动注册。</p>
<p>RuntimeStatic是通过一个静态全局链表和Optional协作实现的</p>
<h2 id="rttr">RTTR<a class="headerlink" href="#rttr" title="Permanent link">&para;</a></h2>
<ul>
<li>2025-12-21 似乎暂时不太需要，rbc的需求是比较封闭的，直接switch即可</li>
</ul>
<p>Runtime Type Reflection 运行时类型反射</p>
<p>C++当前反射还没有支持完全，大部分的反射都需要构建系统支持，在Robocute中我们采用python作为反射方案，通过Python实现一个RTTRBasic来和代码生成，来获得一些运行时的类型反射能力，这在资源系统和场景中非常有用</p>
<p>暂时不考虑虚继承\多基类的情况</p>
<p>record_data: class info
- comment
- file_name
- line
- name
- attrs
- name
- access
- is_virtual
- bases</p>
<h3 id="rttrtype">RTTRType<a class="headerlink" href="#rttrtype" title="Permanent link">&para;</a></h3>
<p>基础组件，记录了RTTRType的信息</p>
<ul>
<li>module</li>
<li>type_category</li>
<li>name</li>
<li>name_space</li>
<li>name_space_str</li>
<li>full_name</li>
<li>type_id</li>
<li>size</li>
<li>alignment</li>
<li>each_name_space</li>
<li>memory_traits_data</li>
<li>is_primitive</li>
<li>is_record</li>
<li>is_enum</li>
<li>build_primitive</li>
<li>build_record</li>
<li>build_enum</li>
<li>is_based_on</li>
<li>cast_to_base</li>
<li>caster_to_base</li>
<li>has_multiple_bases</li>
<li>has_virtual_bases</li>
<li>enum_underlying_type_id</li>
<li>each_enum_items</li>
<li>dtor_data</li>
<li>dtor_invoker</li>
<li>invoke_dtor</li>
<li>each_bases</li>
<li>each_ctor</li>
<li>each_method</li>
<li>each_field</li>
<li>each_static_method</li>
<li>each_static_field</li>
</ul>
<h3 id="rttrrecorddata">RTTRRecordData<a class="headerlink" href="#rttrrecorddata" title="Permanent link">&para;</a></h3>
<ul>
<li>name </li>
<li>namespace</li>
<li>type_id</li>
<li>size</li>
<li>alignment</li>
<li>memory_traits_data</li>
</ul>
<p>ExportMethodInvoker</p>
<pre><code class="language-cpp">template &lt;typename... Args&gt;
struct ExportCtorInvoker&lt;void(Args...)&gt; {
  inline void invoke(void* p_obj, Args... args) const 
  {
    ASSERT(_ctor_data-&gt;native_invoke);
    auto invoker = reinterpret_cast&lt;void(*)(void*, Args...)&gt;(_ctor_data-&gt;native_invoke);
    invoker(p_obj, args...);
  }
}
</code></pre>
<pre><code class="language-cpp">struct RTTRExportHelper {
  template&lt;typename T, typename... Args&gt;
  inline static void* export_ctor()
  {
    auto result = +[](void* p, Args... args) {
      new (p) T(std::forward&lt;Args&gt;(args)...);
    }
    return reinterpret_cast&lt;void*&gt;(result);
  }
};
</code></pre>
<h3 id="rttrrecordbuilder">RTTRRecordBuilder<a class="headerlink" href="#rttrrecordbuilder" title="Permanent link">&para;</a></h3>
<h3 id="irttrbasic">IRTTRBasic<a class="headerlink" href="#irttrbasic" title="Permanent link">&para;</a></h3>
<ul>
<li>placement new</li>
<li>StaticType: <code>return ::skr::type_of&lt;Decl&gt;();</code></li>
<li>rttr_get_type</li>
<li>rttr_get_type_id</li>
<li>rttr_get_head_ptr: <code>return const_cast&lt;void*&gt;((const void*)this)</code></li>
</ul>
<h3 id="is_based_on">is_based_on<a class="headerlink" href="#is_based_on" title="Permanent link">&para;</a></h3>
<ul>
<li>RTTR最重要的一点就是在运行时依然保留类型的继承关系</li>
<li>分type_category讨论</li>
<li>ERTTRTypeCategory::Primitive</li>
<li>ERTTRTypeCategory::Record<ul>
<li>_record_data.type_id</li>
</ul>
</li>
<li>RTTRTypeCategory::Enum</li>
</ul>
<h2 id="rc">RC<a class="headerlink" href="#rc" title="Permanent link">&para;</a></h2>
<p>RefCounted</p>
<p>RBC_RC_INTERFACE
- rbc_rc_count
- rbc_rc_add_ref
- rbc_rc_weak_lock
- rbc_rc_release
- rbc_rc_weak_ref_count
- rbc_rc_weak_ref_counter
- rbc_rc_weak_ref_counter_notify_dead
- rbc_rc_delete</p>
<p>RBC_RC_IMPL</p>
<ul>
<li>RC</li>
<li>RCWeak</li>
<li>RCWeakLocker</li>
<li>RCBase</li>
</ul>
<h2 id="memory-management">Memory Management<a class="headerlink" href="#memory-management" title="Permanent link">&para;</a></h2>
<h3 id="_1">内存分配函数<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p>RBC 提供了封装的内存分配函数，包括：
- <code>rbc_malloc</code> / <code>rbc_free</code> - 基本内存分配
- <code>rbc_malloc_aligned</code> / <code>rbc_free_aligned</code> - 对齐内存分配
- <code>rbc_calloc</code> / <code>rbc_calloc_aligned</code> - 零初始化内存分配
- <code>rbc_realloc</code> / <code>rbc_realloc_aligned</code> - 内存重分配
- <code>RBCNew&lt;T&gt;</code> / <code>RBCDelete&lt;T&gt;</code> - 类型安全的 new/delete
- <code>RBCNewAligned&lt;T&gt;</code> / <code>RBCDeleteAligned&lt;T&gt;</code> - 对齐的类型安全 new/delete</p>
<h3 id="addresssanitizer-asan">使用 AddressSanitizer (ASAN) 测试内存泄漏<a class="headerlink" href="#addresssanitizer-asan" title="Permanent link">&para;</a></h3>
<p>AddressSanitizer (ASAN) 是一个快速的内存错误检测工具，可以检测：
- 内存泄漏 (memory leaks)
- 使用已释放内存 (use-after-free)
- 缓冲区溢出 (buffer overflow)
- 使用未初始化内存 (use of uninitialized memory)
- 内存对齐错误 (misaligned memory access)</p>
<h4 id="asan">配置 ASAN<a class="headerlink" href="#asan" title="Permanent link">&para;</a></h4>
<p>在 xmake 中启用 ASAN：</p>
<p><strong>Linux/macOS:</strong></p>
<pre><code class="language-bash"># 配置 debug 模式并启用 ASAN
xmake f -m debug --sanitize=address

# 编译测试
xmake build test_core

# 运行测试（ASAN 会自动检测内存问题）
xmake run test_core
</code></pre>
<p><strong>Windows (使用 clang-cl):</strong></p>
<pre><code class="language-bash"># 配置 debug 模式并启用 ASAN
xmake f -m debug --sanitize=address --toolchain=clang

# 编译测试
xmake build test_core

# 运行测试
xmake run test_core
</code></pre>
<h4 id="asan_1">在代码中启用 ASAN<a class="headerlink" href="#asan_1" title="Permanent link">&para;</a></h4>
<p>如果需要在特定 target 中启用 ASAN，可以在 <code>xmake.lua</code> 中添加：</p>
<pre><code class="language-lua">target(&quot;test_core&quot;)
    -- 启用 AddressSanitizer
    if is_plat(&quot;linux&quot;, &quot;macosx&quot;) then
        add_cxflags(&quot;-fsanitize=address&quot;)
        add_mxflags(&quot;-fsanitize=address&quot;)
        add_ldflags(&quot;-fsanitize=address&quot;)
    elseif is_plat(&quot;windows&quot;) and is_toolchain(&quot;clang&quot;) then
        add_cxflags(&quot;-fsanitize=address&quot;)
        add_mxflags(&quot;-fsanitize=address&quot;)
        add_ldflags(&quot;-fsanitize=address&quot;)
    end
</code></pre>
<h4 id="_2">测试内存泄漏示例<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<p>编写测试用例来验证内存分配/释放是否正确：</p>
<pre><code class="language-cpp">#include &quot;test_util.h&quot;
#include &lt;rbc_core/memory.h&gt;

TEST_SUITE(&quot;core&quot;) {
    TEST_CASE(&quot;memory_leak_detection&quot;) {
        // 正确使用：分配后释放
        void *ptr = rbc_malloc(100);
        CHECK(ptr != nullptr);
        rbc_free(ptr);  // ASAN 不会报告泄漏

        // 错误示例：分配后未释放（会被 ASAN 检测到）
        // void *leaked = rbc_malloc(100);
        // 如果忘记释放，ASAN 会报告：
        // &quot;ERROR: LeakSanitizer: detected memory leaks&quot;
    }

    TEST_CASE(&quot;rbc_new_delete_leak_detection&quot;) {
        // 测试 RBCNew/RBCDelete 是否正确配对
        int *ptr = RBCNew&lt;int&gt;(42);
        CHECK(ptr != nullptr);
        CHECK(*ptr == 42);
        RBCDelete(ptr);  // 正确释放，ASAN 不会报告泄漏

        // 错误示例：忘记调用 RBCDelete
        // int *leaked = RBCNew&lt;int&gt;(42);
        // ASAN 会检测到泄漏
    }

    TEST_CASE(&quot;use_after_free_detection&quot;) {
        int *ptr = RBCNew&lt;int&gt;(100);
        RBCDelete(ptr);

        // 错误示例：使用已释放的内存（会被 ASAN 检测到）
        // *ptr = 200;  // ASAN 会报告：
        // &quot;ERROR: AddressSanitizer: use-after-free&quot;
    }

    TEST_CASE(&quot;buffer_overflow_detection&quot;) {
        int *arr = (int *)rbc_malloc(10 * sizeof(int));

        // 正确使用
        arr[9] = 100;

        // 错误示例：缓冲区溢出（会被 ASAN 检测到）
        // arr[10] = 200;  // ASAN 会报告：
        // &quot;ERROR: AddressSanitizer: heap-buffer-overflow&quot;

        rbc_free(arr);
    }
}
</code></pre>
<h4 id="asan_2">ASAN 输出解读<a class="headerlink" href="#asan_2" title="Permanent link">&para;</a></h4>
<p>当 ASAN 检测到内存问题时，会输出类似以下的信息：</p>
<pre><code>=================================================================
==12345==ERROR: LeakSanitizer: detected memory leaks

Direct leak of 100 byte(s) in 1 object(s) allocated from:
    #0 0x7f8b2c0d4b40 in malloc
    #1 0x55a1b2c3d4e0 in rbc_malloc rbc/core/src/memory.cpp:112
    #2 0x55a1b2c3e1a0 in test_memory_leak test_memory.cpp:15

SUMMARY: AddressSanitizer: 100 byte(s) leaked in 1 allocation(s).
=================================================================
</code></pre>
<p>关键信息：
- <strong>Direct leak</strong>: 直接泄漏（未释放的内存）
- <strong>Indirect leak</strong>: 间接泄漏（通过指针间接持有的内存）
- <strong>Stack trace</strong>: 显示分配内存的调用栈，帮助定位问题</p>
<h4 id="_3">环境变量配置<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>可以通过环境变量控制 ASAN 的行为：</p>
<pre><code class="language-bash"># 设置 ASAN 选项
export ASAN_OPTIONS=&quot;detect_leaks=1:halt_on_error=1:abort_on_error=1&quot;

# Windows (PowerShell)
$env:ASAN_OPTIONS=&quot;detect_leaks=1:halt_on_error=1:abort_on_error=1&quot;

# 运行测试
xmake run test_core
</code></pre>
<p>常用 ASAN 选项：
- <code>detect_leaks=1</code> - 启用内存泄漏检测（默认开启）
- <code>halt_on_error=1</code> - 检测到错误时停止程序
- <code>abort_on_error=1</code> - 检测到错误时中止程序
- <code>print_stats=1</code> - 打印统计信息
- <code>check_initialization_order=1</code> - 检查初始化顺序问题
- <code>detect_stack_use_after_return=1</code> - 检测栈返回后使用</p>
<h4 id="_4">注意事项<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>性能影响</strong>: ASAN 会显著降低程序运行速度（约 2-3 倍），仅用于调试</li>
<li><strong>内存占用</strong>: ASAN 会增加内存使用（约 2-3 倍）</li>
<li><strong>Windows 限制</strong>: Windows 上需要 clang-cl 工具链，MSVC 不支持 ASAN</li>
<li><strong>与 mimalloc 兼容性</strong>: 如果使用 mimalloc，可能需要特殊配置</li>
<li><strong>测试环境</strong>: 建议在 CI/CD 中定期运行 ASAN 测试</li>
</ol>
<h4 id="_5">最佳实践<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>定期运行</strong>: 在每次代码提交前运行 ASAN 测试</li>
<li><strong>完整覆盖</strong>: 确保所有内存分配函数都有对应的测试用例</li>
<li><strong>边界测试</strong>: 测试边界情况（零大小、大内存、对齐等）</li>
<li><strong>配对检查</strong>: 确保每个 <code>malloc</code> 都有对应的 <code>free</code>，每个 <code>RBCNew</code> 都有对应的 <code>RBCDelete</code></li>
<li><strong>文档记录</strong>: 在代码注释中说明内存所有权和生命周期</li>
</ol>
<h2 id="concurrentqueue">ConcurrentQueue<a class="headerlink" href="#concurrentqueue" title="Permanent link">&para;</a></h2>
<p>RBC 提供了一个基于 moodycamel 实现的多生产者、多消费者无锁队列（lock-free queue）。该队列使用 RBC 的内存分配系统，确保所有内存操作都通过 RBC 的内存管理接口。</p>
<h3 id="_6">特性<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>无锁设计</strong>: 使用原子操作实现，无需互斥锁</li>
<li><strong>多生产者多消费者</strong>: 支持多个线程同时进行入队和出队操作</li>
<li><strong>高性能</strong>: 针对高并发场景优化</li>
<li><strong>内存管理</strong>: 使用 RBC 的内存分配函数，与 RBC 内存系统集成</li>
<li><strong>类型安全</strong>: 模板化设计，支持任意类型</li>
</ul>
<h3 id="_7">基本使用<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">#include &lt;rbc_core/containers/rbc_concurrent_queue.h&gt;

// 创建队列
rbc::ConcurrentQueue&lt;int&gt; queue;

// 入队
queue.enqueue(42);
queue.enqueue(100);

// 出队
int value;
if (queue.try_dequeue(value)) {
    // 处理 value
}
</code></pre>
<h3 id="producer-token-consumer-token">Producer Token 和 Consumer Token<a class="headerlink" href="#producer-token-consumer-token" title="Permanent link">&para;</a></h3>
<p>为了提高性能，可以使用 producer token 和 consumer token：</p>
<pre><code class="language-cpp">rbc::ConcurrentQueue&lt;int&gt; queue;

// 创建 producer token（每个线程一个）
rbc::ConcurrentQueue&lt;int&gt;::producer_token_t producer(queue);

// 使用 token 入队（性能更好）
queue.enqueue(producer, 42);

// 创建 consumer token（每个线程一个）
rbc::ConcurrentQueue&lt;int&gt;::consumer_token_t consumer(queue);

// 使用 token 出队（性能更好）
int value;
queue.try_dequeue(consumer, value);
</code></pre>
<h3 id="_8">批量操作<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>支持批量入队和出队，提高吞吐量：</p>
<pre><code class="language-cpp">// 批量入队
std::vector&lt;int&gt; items = {1, 2, 3, 4, 5};
queue.enqueue_bulk(items.begin(), items.size());

// 批量出队
std::vector&lt;int&gt; results(5);
size_t dequeued = queue.try_dequeue_bulk(results.begin(), 5);
</code></pre>
<h3 id="_9">多线程示例<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<pre><code class="language-cpp">rbc::ConcurrentQueue&lt;int&gt; queue;
const int num_producers = 4;
const int num_consumers = 2;

// 生产者线程
std::vector&lt;std::thread&gt; producers;
for (int i = 0; i &lt; num_producers; ++i) {
    producers.emplace_back([&amp;queue, i]() {
        for (int j = 0; j &lt; 100; ++j) {
            queue.enqueue(i * 100 + j);
        }
    });
}

// 消费者线程
std::vector&lt;std::thread&gt; consumers;
for (int i = 0; i &lt; num_consumers; ++i) {
    consumers.emplace_back([&amp;queue]() {
        int value;
        while (queue.try_dequeue(value)) {
            // 处理 value
        }
    });
}

// 等待所有线程完成
for (auto &amp;t : producers) t.join();
for (auto &amp;t : consumers) t.join();
</code></pre>
<h3 id="api">API 参考<a class="headerlink" href="#api" title="Permanent link">&para;</a></h3>
<h4 id="_10">构造和析构<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h4>
<ul>
<li><code>ConcurrentQueue(size_t capacity = 32 * BLOCK_SIZE)</code> - 创建队列，可选指定初始容量</li>
<li><code>ConcurrentQueue(size_t minCapacity, size_t maxExplicitProducers, size_t maxImplicitProducers)</code> - 根据预期使用情况创建队列</li>
</ul>
<h4 id="_11">入队操作<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<ul>
<li><code>bool enqueue(T const &amp;item)</code> - 入队（复制）</li>
<li><code>bool enqueue(T &amp;&amp;item)</code> - 入队（移动）</li>
<li><code>bool enqueue(producer_token_t const &amp;token, T const &amp;item)</code> - 使用 token 入队</li>
<li><code>bool try_enqueue(T const &amp;item)</code> - 尝试入队（不分配内存）</li>
<li><code>bool enqueue_bulk(It itemFirst, size_t count)</code> - 批量入队</li>
<li><code>bool enqueue_bulk(producer_token_t const &amp;token, It itemFirst, size_t count)</code> - 使用 token 批量入队</li>
</ul>
<h4 id="_12">出队操作<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h4>
<ul>
<li><code>bool try_dequeue(U &amp;item)</code> - 尝试出队</li>
<li><code>bool try_dequeue(consumer_token_t &amp;token, U &amp;item)</code> - 使用 token 尝试出队</li>
<li><code>size_t try_dequeue_bulk(It itemFirst, size_t max)</code> - 批量出队</li>
<li><code>size_t try_dequeue_bulk(consumer_token_t &amp;token, It itemFirst, size_t max)</code> - 使用 token 批量出队</li>
</ul>
<h4 id="_13">其他操作<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<ul>
<li><code>size_t size_approx() const</code> - 获取队列大小的近似值</li>
<li><code>static constexpr bool is_lock_free()</code> - 检查底层原子操作是否无锁</li>
</ul>
<h3 id="traits">Traits 配置<a class="headerlink" href="#traits" title="Permanent link">&para;</a></h3>
<p><code>RBCConcurrentQueueTraits</code> 提供了以下可配置参数：</p>
<ul>
<li><code>BLOCK_SIZE</code> - 块大小（默认 32，必须是 2 的幂）</li>
<li><code>EXPLICIT_INITIAL_INDEX_SIZE</code> - 显式生产者的初始索引大小（默认 32）</li>
<li><code>IMPLICIT_INITIAL_INDEX_SIZE</code> - 隐式生产者的初始索引大小（默认 32）</li>
<li><code>INITIAL_IMPLICIT_PRODUCER_HASH_SIZE</code> - 隐式生产者哈希表初始大小（默认 32）</li>
<li><code>RECYCLE_ALLOCATED_BLOCKS</code> - 是否回收动态分配的块（默认 false）</li>
</ul>
<h3 id="_14">性能建议<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>使用 Token</strong>: 对于频繁操作的线程，使用 producer/consumer token 可以提高性能</li>
<li><strong>批量操作</strong>: 当需要处理多个元素时，使用批量操作减少开销</li>
<li><strong>避免频繁查询大小</strong>: <code>size_approx()</code> 是近似值，频繁调用可能影响性能</li>
<li><strong>合理设置容量</strong>: 根据预期使用情况设置初始容量，减少动态分配</li>
</ol>
<h3 id="_15">内存管理<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h3>
<p>ConcurrentQueue 使用 RBC 的内存分配函数（<code>rbc_malloc</code>/<code>rbc_free</code>），确保：
- 所有内存分配都通过 RBC 的内存管理系统
- 支持内存池和追踪
- 与 RBC 的其他组件一致的内存管理策略</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 RoboCute Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/robocute/robocute" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>